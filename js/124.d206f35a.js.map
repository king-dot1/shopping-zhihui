{"version":3,"file":"js/124.d206f35a.js","mappings":"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","sources":["webpack://shopping/./src/api/address.js","webpack://shopping/./src/views/address/update.vue","webpack://shopping/src/views/address/update.vue","webpack://shopping/./src/views/address/update.vue?1b80","webpack://shopping/./src/views/address/update.vue?4749","webpack://shopping/./src/mixins/address.js"],"sourcesContent":["// 封装收货地址 API 接口\r\nimport request from '@/utils/request'\r\n\r\n// 获取省市区 -添加地址\r\nexport const getRegionTree = () => {\r\n  return request.get('/region/tree')\r\n}\r\n\r\n// 收货地址列表\r\nexport const getAddressList = () => {\r\n  return request.get('/address/list')\r\n}\r\n\r\n// 添加收货地址\r\nexport const addressAdd = (name, phone, region, detail) => {\r\n  return request.post('/address/add', {\r\n    form: {\r\n      name,\r\n      phone,\r\n      region,\r\n      detail\r\n    }\r\n  })\r\n}\r\n\r\n// 获取收货地址详情\r\nexport const addressDetail = (addressId) => {\r\n  return request.get('/address/detail', {\r\n    params: { addressId }\r\n  })\r\n}\r\n\r\n// 编辑收货地址\r\nexport const addressEdit = (addressId, data) => {\r\n  const { name, phone, region, detail } = data\r\n  return request.post('/address/edit', {\r\n    addressId, // 地址id\r\n    form: {\r\n      name,\r\n      phone,\r\n      region,\r\n      detail\r\n    }\r\n  })\r\n}\r\n\r\n// 删除收货地址\r\nexport const addressRemove = (addressId) => {\r\n  request.post('/address/remove', { addressId })\r\n}\r\n\r\n// 获取默认地址 id\r\nexport const addressDefaultId = () => {\r\n  return request.get('/address/defaultId')\r\n}\r\n\r\n// 设置默认地址\r\nexport const addressSetDefault = (addressId) => {\r\n  request.post('/address/setDefault', { addressId })\r\n}\r\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"create\"},[_c('van-nav-bar',{attrs:{\"title\":\"编辑收货地址\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.go(-1)}}}),_c('div',{staticClass:\"title\"},[_vm._v(\"收货地址\")]),_c('van-form',{ref:\"formInfo\",attrs:{\"validate-first\":\"\"},on:{\"submit\":_vm.onSubmit,\"failed\":_vm.onFailed}},[_c('van-field',{staticClass:\"field1\",attrs:{\"label\":\"姓名\",\"name\":\"name\",\"placeholder\":\"请输入收货人姓名\",\"rules\":_vm.formRyles.name},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}}),_c('van-field',{attrs:{\"label\":\"电话\",\"name\":\"mobile\",\"placeholder\":\"请输入收货人手机号\",\"rules\":_vm.formRyles.mobile},model:{value:(_vm.mobile),callback:function ($$v) {_vm.mobile=$$v},expression:\"mobile\"}}),_c('van-field',{attrs:{\"rules\":_vm.formRyles.area,\"readonly\":\"\",\"clickable\":\"\",\"name\":\"area\",\"value\":_vm.area,\"label\":\"地区选择\",\"placeholder\":\"请选择省/市/区\"},on:{\"click\":function($event){_vm.showArea = true}}}),_c('van-popup',{attrs:{\"position\":\"bottom\"},model:{value:(_vm.showArea),callback:function ($$v) {_vm.showArea=$$v},expression:\"showArea\"}},[_c('van-area',{attrs:{\"area-list\":_vm.areaList1,\"value\":_vm.selectedAreaCode},on:{\"confirm\":_vm.onConfirm,\"cancel\":function($event){_vm.showArea = false}}})],1),_c('van-field',{staticClass:\"field2\",attrs:{\"label\":\"详细地址\",\"name\":\"detail\",\"placeholder\":\"街道门牌、楼层等信息\",\"rules\":_vm.formRyles.detail},model:{value:(_vm.detail),callback:function ($$v) {_vm.detail=$$v},expression:\"detail\"}}),_c('div',{staticStyle:{\"margin\":\"16px\"}},[_c('van-button',{attrs:{\"round\":\"\",\"block\":\"\",\"type\":\"info\",\"native-type\":\"submit\"}},[_vm._v(\"保存\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"create\">\r\n    <!-- 顶部返回导航 -->\r\n    <van-nav-bar title=\"编辑收货地址\" left-arrow @click-left=\"$router.go(-1)\" />\r\n    <div class=\"title\">收货地址</div>\r\n    <!-- 收获地址 -->\r\n    <van-form @submit=\"onSubmit\" ref=\"formInfo\" validate-first @failed=\"onFailed\">\r\n      <van-field class=\"field1\" label=\"姓名\" v-model=\"name\" name=\"name\" placeholder=\"请输入收货人姓名\" :rules=\"formRyles.name\" />\r\n\r\n      <van-field label=\"电话\" v-model=\"mobile\" name=\"mobile\" placeholder=\"请输入收货人手机号\" :rules=\"formRyles.mobile\" />\r\n\r\n      <van-field :rules=\"formRyles.area\" readonly clickable name=\"area\" :value=\"area\" label=\"地区选择\"\r\n        placeholder=\"请选择省/市/区\" @click=\"showArea = true\" />\r\n      <van-popup v-model=\"showArea\" position=\"bottom\">\r\n        <van-area :area-list=\"areaList1\" :value=\"selectedAreaCode\" @confirm=\"onConfirm\" @cancel=\"showArea = false\" />\r\n      </van-popup>\r\n\r\n      <van-field class=\"field2\" label=\"详细地址\" v-model=\"detail\" name=\"detail\" placeholder=\"街道门牌、楼层等信息\"\r\n        :rules=\"formRyles.detail\" />\r\n      <div style=\"margin: 16px;\">\r\n        <van-button round block type=\"info\" native-type=\"submit\">保存</van-button>\r\n      </div>\r\n    </van-form>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { addressDetail, addressEdit } from '@/api/address'\r\nimport address from '@/mixins/address'\r\nexport default {\r\n  name: 'updatePage',\r\n  mixins: [address], // 使用mixins，调用混入方法\r\n  data () {\r\n    return {\r\n      selectedAreaCode: '100000' // 选中的 code\r\n    }\r\n  },\r\n  async created () {\r\n    // 异步处理\r\n    try {\r\n      // 获取省市区数据\r\n      await this.getRegionTree()\r\n      // 数据处理\r\n      this.getRegionTreeHandler(this.$store.state.address.list)\r\n      // 获取地址详情\r\n      this.getAddressDetail()\r\n    } catch (error) {\r\n      console.error(error)\r\n    }\r\n  },\r\n  methods: {\r\n    // 获取地址详情\r\n    async getAddressDetail () {\r\n      const { data: { detail } } = await addressDetail(this.addressId)\r\n      this.detail = detail.detail\r\n      this.name = detail.name\r\n      this.mobile = detail.phone\r\n      this.area = detail.region.province + '/' + detail.region.city + '/' + detail.region.region\r\n\r\n      // 拿到区 的code\r\n      const county = this.areaList2.find(item => item.value === detail.province_id)\r\n        .children.find(item => item.value === detail.city_id)\r\n        .children.find(item => item.value === detail.region_id)\r\n      this.selectedAreaCode = county.code\r\n\r\n      // 回显 省市区 -初始化数据\r\n      this.region = [\r\n        { value: detail.province_id, label: detail.region.province },\r\n        { value: detail.city_id, label: detail.region.city },\r\n        { value: detail.region_id, label: detail.region.region }\r\n      ]\r\n    },\r\n\r\n    // 提交时 传数据发起请求\r\n    async onSubmit () {\r\n      // 编辑地址\r\n      await addressEdit(this.addressId, { name: this.name, phone: this.mobile, region: this.region, detail: this.detail })\r\n      this.$router.go(-1)\r\n    }\r\n\r\n  },\r\n\r\n  computed: {\r\n    // 获取查询参数\r\n    addressId () {\r\n      return this.$route.query.addressId\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.create {\r\n  background-color: #fafafa;\r\n\r\n  .title {\r\n    margin: 30px 10px;\r\n    margin-bottom: 0;\r\n    color: rgba(69, 90, 100, .6);\r\n    font-size: 16px;\r\n  }\r\n\r\n  .field1 {\r\n    border-top-left-radius: 10px;\r\n    border-top-right-radius: 10px;\r\n  }\r\n\r\n  .field2 {\r\n    border-bottom-left-radius: 10px;\r\n    border-bottom-right-radius: 10px;\r\n  }\r\n\r\n  .van-form {\r\n    margin: 20px 10px;\r\n    border-radius: 20px;\r\n\r\n    .van-button {\r\n      border: 0;\r\n      background: linear-gradient(90deg, #f9211c, #ff6335);\r\n    }\r\n  }\r\n\r\n}\r\n\r\n/* 深度选择器修改输入框文字颜色 */\r\n::v-deep.van-field--error .van-field__control::placeholder {\r\n  color: #c9c9c9;\r\n}\r\n\r\n::v-deep.van-field--error .van-field__control {\r\n  color: #303133;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./update.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./update.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./update.vue?vue&type=template&id=4cbc8231&scoped=true\"\nimport script from \"./update.vue?vue&type=script&lang=js\"\nexport * from \"./update.vue?vue&type=script&lang=js\"\nimport style0 from \"./update.vue?vue&type=style&index=0&id=4cbc8231&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4cbc8231\",\n  null\n  \n)\n\nexport default component.exports","import { getRegionTree } from '@/api/address'\r\nexport default {\r\n  // 实现 修改页面 和 创建页面的变量和方法复用\r\n  data () {\r\n    return {\r\n      name: '', // 名字\r\n      mobile: '', // 电话\r\n      region: [], // 地址 value label\r\n      area: '', // 地区\r\n      detail: '', // 详细地址\r\n      showArea: false, // 弹窗状态\r\n      areaList1: { // 存储 展示数据\r\n        province_list: {},\r\n        city_list: {},\r\n        county_list: {}\r\n      },\r\n      areaList2: [], // 存储 value 数据\r\n      formRyles: { // 校验规则\r\n        name: [\r\n          { required: true, message: '请输入名字' }\r\n        ],\r\n        // 手机号校验规则\r\n        mobile: [\r\n          { required: true, message: '请填手机号' },\r\n          {\r\n            pattern: /^1[3-9]\\d{9}$/,\r\n            message: '请输入正确手机号'\r\n          }\r\n        ],\r\n        area: [\r\n          { required: true, message: '请选择地区' }\r\n        ],\r\n        detail: [\r\n          { required: true, message: '请输入详细地址' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    // 提交时 错误提示文字\r\n    onFailed (error) {\r\n      this.$toast(error.errors[0].message)\r\n    },\r\n\r\n    // 地址选择时 回显\r\n    onConfirm (values) {\r\n      // 地址 -数据处理\r\n      // 根据 code 查找 省、市、区的 value\r\n      const province = this.areaList2.find(item => item.code === values[0].code)\r\n      const city = province.children.find(item => item.code === values[1].code)\r\n      const county = city.children.find(item => item.code === values[2].code)\r\n\r\n      this.region = [\r\n        { value: province.value, label: province.name },\r\n        { value: city.value, label: city.name },\r\n        { value: county.value, label: county.name }\r\n      ]\r\n\r\n      this.area = values\r\n        .filter((item) => !!item)\r\n        .map((item) => item.name)\r\n        .join('/')\r\n      this.showArea = false\r\n    },\r\n\r\n    // 获取地区数据\r\n    async getRegionTree () {\r\n      // 缓存中是否有数据\r\n      const regionTree = this.$store.state.address.list\r\n      if (Object.keys(regionTree).length > 0) {\r\n        // 有数据，直接处理数据\r\n        this.getRegionTreeHandler(regionTree)\r\n        return\r\n      }\r\n      const { data: { list } } = await getRegionTree()\r\n      this.$store.commit('address/setRegionTreeMutation', list)\r\n    },\r\n\r\n    // 获取地区数据处理\r\n    async getRegionTreeHandler (list) {\r\n      const provinceKeys = Object.keys(list)\r\n      // 循环 处理省\r\n      provinceKeys.forEach((provinceKey, provinceIndex) => {\r\n        const province = list[provinceKey]\r\n        const provinceCode = (10 + provinceIndex).toString().padEnd(6, '0')\r\n        this.areaList1.province_list[provinceCode] = province.name\r\n        // value 的存储\r\n        this.areaList2[provinceIndex] = { code: provinceCode, value: province.id, name: province.name, children: [] }\r\n        // 判断 是否有市\r\n        if (province.city) {\r\n          const cityKeys = Object.keys(province.city)\r\n          // 循环 处理市\r\n          cityKeys.forEach((cityKey, cityIndex) => {\r\n            const city = province.city[cityKey]\r\n            // code 前两位省 中间两位市 后两位区\r\n            const cityCode = (10 + provinceIndex).toString() + (cityIndex + 1).toString().padStart(2, '0') + '00'\r\n            this.areaList1.city_list[cityCode] = city.name\r\n            // ******\r\n            this.areaList2[provinceIndex].children[cityIndex] = { code: cityCode, value: city.id, name: city.name, children: [] }\r\n\r\n            // 判断 是否有区\r\n            if (city.region) {\r\n              const countyKeys = Object.keys(city.region)\r\n              // 循环 处理市\r\n              countyKeys.forEach((countyKey, countyIndex) => {\r\n                const county = city.region[countyKey]\r\n                // code 前两位省 中间两位市 后两位区\r\n                const countyCode = (10 + provinceIndex).toString() + (cityIndex + 1).toString().padStart(2, '0') + (countyIndex + 1).toString().padStart(2, '0')\r\n                this.areaList1.county_list[countyCode] = county.name\r\n                // ******\r\n                this.areaList2[provinceIndex].children[cityIndex].children[countyIndex] = { code: countyCode, value: county.id, name: county.name }\r\n              })\r\n            }\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n"],"names":["getRegionTree","request","get","getAddressList","addressAdd","name","phone","region","detail","post","form","addressDetail","addressId","params","addressEdit","data","addressRemove","addressDefaultId","addressSetDefault","render","_vm","this","_c","_self","staticClass","attrs","on","$event","$router","go","_v","ref","onSubmit","onFailed","formRyles","model","value","callback","$$v","expression","mobile","area","showArea","areaList1","selectedAreaCode","onConfirm","staticStyle","staticRenderFns","mixins","address","created","getRegionTreeHandler","$store","state","list","getAddressDetail","error","console","methods","province","city","county","areaList2","find","item","province_id","children","city_id","region_id","code","label","computed","$route","query","component","province_list","city_list","county_list","required","message","pattern","$toast","errors","values","filter","map","join","regionTree","Object","keys","length","commit","provinceKeys","forEach","provinceKey","provinceIndex","provinceCode","toString","padEnd","id","cityKeys","cityKey","cityIndex","cityCode","padStart","countyKeys","countyKey","countyIndex","countyCode"],"sourceRoot":""}