"use strict";(self["webpackChunkshopping"]=self["webpackChunkshopping"]||[]).push([[728],{1728:function(s,t,a){a.r(t),a.d(t,{default:function(){return l}});a(4114);var r=function(){var s=this,t=s._self._c;return t("div",{staticClass:"pay"},[t("van-nav-bar",{attrs:{title:"订单结算台",fixed:"","left-arrow":""},on:{"click-left":function(t){return s.$router.go(-1)}}}),s.orderList.goodsList?t("div",{staticClass:"content"},[t("div",{staticClass:"address",on:{click:function(t){return s.$router.push("/address?from=checkout")}}},[t("div",{staticClass:"icon-left"},[t("van-icon",{attrs:{name:"location-o"}})],1),t("div",{staticClass:"title"},[null!==s.orderList.address?t("div",{staticClass:"txt"},[t("div",{staticClass:"txt-name-phone"},[t("span",{staticClass:"name"},[s._v(s._s(s.orderList.address.name))]),t("span",{staticClass:"phone"},[s._v(s._s(s.orderList.address.phone))])]),t("div",{staticClass:"txt-place"},[s._v(" "+s._s(s.orderList.address.region.province+s.orderList.address.region.city+s.orderList.address.region.region+s.orderList.address.detail)+" ")])]):t("div",{staticClass:"tips"},[s._v("请选择配送地址")])]),t("div",{staticClass:"icon-right"},[t("van-icon",{attrs:{name:"arrow"}})],1)]),t("div",{staticClass:"pay-list"},[s._l(s.orderList.goodsList,(function(a,r){return t("div",{key:r,staticClass:"goods-item"},[t("div",{staticClass:"left"},[t("img",{attrs:{src:a.goods_image,alt:""}})]),t("div",{staticClass:"right"},[t("p",{staticClass:"text-ellipsis-2"},[s._v(s._s(a.goods_name))]),t("p",{staticClass:"info"},[t("span",[s._v("x"+s._s(a.total_num))]),t("span",{staticClass:"price red"},[s._v("￥"+s._s(a.goods_price))])])])])})),t("div",{staticClass:"goods-total"},[t("span",[s._v("共 "+s._s(s.orderList.orderTotalNum)+" 件商品，合计：")]),t("span",{staticClass:"total red"},[s._v("￥"+s._s(s.orderList.orderTotalPrice))])]),t("div",{staticClass:"pay-detail"},[t("div",{staticClass:"sum-money"},[t("span",[s._v("订单总金额：")]),t("span",{staticClass:"red"},[s._v("￥"+s._s(s.orderList.orderPrice))])]),s._m(0),s._m(1)])],2),t("div",{staticClass:"pay-way"},[t("div",{staticClass:"title"},[s._v("支付方式")]),t("div",{staticClass:"balance"},[t("span",[t("van-icon",{attrs:{name:"balance-o"}}),s._v(" 余额支付（可用 ¥ "+s._s(s.personal.balance)+" 元） ")],1),t("van-icon",{staticClass:"red",attrs:{name:"passed"}})],1)]),t("div",{staticClass:"message"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:s.remark,expression:"remark"}],attrs:{placeholder:"选填：买家留言（50字内）"},domProps:{value:s.remark},on:{input:function(t){t.target.composing||(s.remark=t.target.value)}}})]),t("div",{staticClass:"floor-fixed"},[t("div",{staticClass:"txt"},[s._v(" 实付款： "),t("span",{staticClass:"red"},[s._v("￥"+s._s(s.orderList.orderPayPrice))])]),t("div",{staticClass:"bnt-order",on:{click:s.submit}},[s._v("提交订单")])])]):s._e()],1)},e=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"roll"},[t("span",[s._v("优惠卷：")]),t("span",[s._v("无优惠卷可用")])])},function(){var s=this,t=s._self._c;return t("div",{staticClass:"freight"},[t("span",[s._v("配送运费：")]),t("span",{staticClass:"red"},[s._v("+￥0.00")])])}],i=a(4180),o={name:"PayIndex",data(){return{orderList:{},personal:{},remark:""}},created(){this.getCheckoutOrder()},methods:{async getCheckoutOrder(){let s={goodsId:this.goodsId,goodsNum:this.goodsNum,goodsSkuId:this.goodsSkuId};"cart"===this.mode&&(s={cartIds:this.$route.query.cartIds,remark:this.remark});const t=await(0,i.hh)(this.mode,s),{data:{order:a,personal:r}}=t;this.personal=r||{},this.orderList=a||{}},async submit(){let s={goodsId:this.goodsId,goodsNum:this.goodsNum,goodsSkuId:this.goodsSkuId,remark:this.remark};"cart"===this.mode&&(s={cartIds:this.$route.query.cartIds,remark:this.remark});try{await(0,i.Z7)(this.mode,s).then((s=>{if("cart"===this.mode){const s=+this.$store.state.cart.cartTotal-+this.orderList.orderTotalNum;this.$store.commit("cart/setCartTotalMutations",s)}this.$toast.success("提交成功"),this.$router.push("/myorder")}))}catch(t){this.$toast.fail("提交失败"),console.error(t)}}},computed:{mode(){return this.$route.query.mode},goodsId(){return this.$route.query.goodsId},goodsNum(){return this.$route.query.goodsNum},goodsSkuId(){return this.$route.query.goodsSkuId}}},d=o,n=a(1656),c=(0,n.A)(d,r,e,!1,null,"50bc25ef",null),l=c.exports}}]);
//# sourceMappingURL=728.88b6026d.js.map