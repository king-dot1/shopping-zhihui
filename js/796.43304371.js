"use strict";(self["webpackChunkshopping"]=self["webpackChunkshopping"]||[]).push([[796],{8796:function(t,e,s){s.r(e),s.d(e,{default:function(){return C}});s(4114);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"order"},[e("van-nav-bar",{attrs:{title:"我的订单",fixed:"","left-arrow":""},on:{"click-left":function(e){return t.$router.go(-1)}}}),e("van-tabs",{on:{click:t.onClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("van-tab",{attrs:{name:"all",title:"全部"}}),e("van-tab",{attrs:{name:"payment",title:"待支付"}}),e("van-tab",{attrs:{name:"delivery",title:"待发货"}}),e("van-tab",{attrs:{name:"received",title:"待收货"}}),e("van-tab",{attrs:{name:"comment",title:"待评价"}})],1),t.orderList.length>0?e("div",{staticClass:"content"},[t._l(t.orderList,(function(s,a){return e("OrderListItem",{key:a,attrs:{item:s},on:{click:function(e){return t.$router.push(`/orderDetail?orderId=${s.order_id}`)}}})})),t._m(0)],2):e("div",{staticClass:"empty-txt"},[e("img",{attrs:{src:s(6661),alt:""}}),e("div",{staticClass:"txt"},[t._v("亲，暂无订单记录")])])],1)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"hint"},[e("span",[t._v("亲，没有更多了")])])}],n=(s(8111),s(7588),s(4180)),o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"order-item"},[e("div",{staticClass:"item-top"},[e("div",{staticClass:"time"},[t._v(" "+t._s(t.item.create_time))]),e("div",{staticClass:"text"},[e("span",[t._v(t._s(t.item.state_text))])])]),e("div",{staticClass:"list",on:{click:function(e){return t.$emit("click")}}},t._l(t.item.goods,(function(s,a){return e("div",{key:a,staticClass:"list-item"},[e("div",{staticClass:"goods-image"},[e("img",{attrs:{src:s.goods_image,alt:""}})]),e("div",{staticClass:"goods-content"},[e("span",{staticClass:"text-ellipsis-2"},[t._v(t._s(s.goods_name))])]),e("div",{staticClass:"goods-right"},[e("span",{staticClass:"price"},[t._v("￥"+t._s(s.goods_price))]),e("span",{staticClass:"count"},[t._v("x "+t._s(s.total_num))])])])})),0),e("div",{staticClass:"total"},[e("span",[t._v("共"+t._s(t.item.total_num)+"件商品，总金额 ￥"),e("span",{staticClass:"count-money"},[t._v(t._s(t.item.total_price))])])]),e("div",{staticClass:"actives"},[e("div",{on:{click:t.onClick}},[10===t.item.order_status?e("div",[10===t.item.pay_status?e("span",[t._v("立刻付款")]):10===t.item.delivery_status?e("span",[t._v("申请取消")]):20===t.item.delivery_status||30===t.item.delivery_status?e("span",[t._v("确认收货")]):t._e()]):t._e(),30===t.item.order_status?e("div",[e("span",[t._v("评价")])]):t._e()]),e("div",{staticClass:"cancel"},["待取消"===t.item.state_text?e("p",[t._v("取消申请中")]):t._e(),"待支付"===t.item.state_text?e("p",[t._v("待支付中")]):t._e(),"待收货"===t.item.state_text?e("p",[t._v("待收货中")]):t._e()])])])},r=[],l=s(9412),c={name:"OrderListItem",mixins:[l.A],props:{item:{type:Object,default:()=>({})}},methods:{onClick(){this.orderConfirm(this.item)}}},d=c,_=s(1656),m=(0,_.A)(d,o,r,!1,null,"3787e30f",null),v=m.exports,u={name:"MyOrderIndex",components:{OrderListItem:v},data(){return{page:1,orderList:[],activeName:this.$route.query.dataType||"all"}},created(){this.onClick(),(0,n.rk)()},methods:{async onClick(){const{data:{list:{data:t}}}=await(0,n.n7)(this.activeName,this.page);t.forEach((t=>{t.total_num=0,t.goods.forEach((e=>{t.total_num+=e.total_num}))})),this.orderList=t}}},p=u,f=(0,_.A)(p,a,i,!1,null,"5852f3ed",null),C=f.exports},9412:function(t,e,s){var a=s(4180);e.A={methods:{orderConfirm(t){let e="";"待发货"===t.state_text?e="您确定要取消该订单吗？":"待收货"===t.state_text?e="您确定要确认收货吗？":"待支付"===t.state_text&&(e="您确定要支付订单吗？"),this.$dialog.confirm({title:"温馨提示",message:e,confirmButtonText:"确定",confirmButtonColor:"#007aff",cancelButtonText:"取消"}).then((async()=>{if("待发货"===t.state_text){const e=await(0,a.N4)(t.order_id);console.log(e)}else if("待收货"===t.state_text){const e=await(0,a.l2)(t.order_id,this.payType);console.log(e)}else if("待支付"===t.state_text){const e=await(0,a.Tg)(t.order_id);console.log(e)}location.reload()})).catch((()=>{}))}}}}}]);
//# sourceMappingURL=796.43304371.js.map